- platform: workday
  country: NL

- platform: template
  sensors:
    donker_buiten:
      value_template: >
        {% if (states.sun.sun.attributes.elevation | int < 10) %}
          true
        {% elif ((states.sun.sun.attributes.elevation | int < 15) and (states.sensor.dark_sky_cloud_coverage.state | int > 40)) %}
          true
        {% elif ((states.sun.sun.attributes.elevation | int < 20) and (states.sensor.dark_sky_cloud_coverage.state | int > 70)) %}
          true
        {% elif (states.sensor.dark_sky_cloud_coverage.state | int > 99) %}
          true
        {% else %}
          false
        {% endif %}

- platform: template
  sensors:
    tv_woonkamer_aan:
      value_template: >
        {% if (is_state('media_player.denon_avrx2100w', 'on')) %}
          true
        {% else %} 
          false
        {% endif %}
        
- platform: template
  sensors:
    iemand_thuis:
      value_template: >
        {% if (
          is_state('input_boolean.forceer_afwezig', 'off') and (
            is_state('input_boolean.forceer_thuis', 'on') or
            is_state('device_tracker.huaweip10litefritzbox', 'home') or
            is_state('binary_sensor.iemand_beneden', 'on') or
            is_state('binary_sensor.iemand_boven', 'on'))) %}
          true
        {% else %} 
          false
        {% endif %}

- platform: template
  sensors:
    iemand_beneden:
      value_template: >
        {% if (
          is_state('input_boolean.forceer_afwezig', 'off') and (
            is_state('binary_sensor.tv_woonkamer_aan', 'on') or
            is_state('timer.beweging_keuken', 'active') or
            is_state('timer.beweging_woonkamer', 'active') or
            is_state('timer.beweging_gang', 'active'))) %}
          true
        {% else %}
          false
        {% endif %}

- platform: template
  sensors:
    iemand_boven:
      value_template: >
        {% if (
          is_state('input_boolean.forceer_afwezig', 'off') and (
            is_state('timer.beweging_overloop', 'active') or
            is_state('timer.beweging_werkkamer', 'active'))) %}
          true
        {% else %}
          false
        {% endif %}
        
- platform: template
  sensors:
    film_kijken:
      value_template: >
        {% if (states.remote.tv_woonkamer.attributes.current_activity | lower == 'watch a movie') %}
          true
        {% else %}
          false
        {% endif %}
